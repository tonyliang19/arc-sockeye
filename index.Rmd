---
title: "Introduction to Sockeye"
subtitle: "<br/>Adapted from UBC ARC Sockeye Workshop"
author: "Tony Liang"
institute: "University of British Columbia"
date: "Last modified -  `r Sys.Date()`"
---

```{r setup, include=FALSE, echo=FALSE}
source("rmd_config.R")
knitr::opts_chunk$set(eval=FALSE)
xaringanExtra::use_clipboard(
  button_text = "Copy",
  success_text = "Copied",
  error_text = "Press Ctrl + C to copy"
)
```

```{r css-extras, file="css-extras.R", echo=FALSE}
```

# Land acknowledgement

.pull-left[
**I would like to acknowledge that I work on the traditional, ancestral, and unceded territory of the Coast Salish Peoples, including the territories of the xwməθkwəy̓əm (Musqueam), Skwxwú7mesh (Squamish), Stó:lō and Səl̓ílwətaʔ/Selilwitulh (Tsleil- Waututh) Nations.**

*Traditional*: Traditionally used and/or occupied by Musqueam people

*Ancestral*: Recognizes land that is handed down from generation to generation

*Unceded*: Refers to land that was not turned over to the Crown (government) by a treaty or other agreement

]

.pull-right[
.center[<img src ="materials/img/land_acknowledgement.gif" alt="matrix", width="80%"/>]
]

---

class: top

# Topics

--

I'm being very extra to show what we are doing today **hopefully?**

.emphasis[
Prepare for the next 50 minutes, eat something, drink something, 

it's gonna be a heavy session.
]

--

.pull-left[
### Easy

- Linux and CLI
- Basic information of Sockeye
- Sockeye Login
]

--

.pull-right[
### Hard

- Setup SSH and VSCode
- Bashrc
- Job Submission
]

--

.secondary[About to start, make sure to follow along!]

.center[
`r pro`  .hand[FOLLOW ME]
`r con`  .hand[FOLLOW ME]
]

---

class: center, middle, inverse
.larger[.hand[FOLLOW ME]]

---

# Linux and CLI
.pull-left[
We will be using the .hand[famous] Linux system, where everything is going to be blacked out.

It is very cool once you are familiar at this.

`r pro` Command Line Interface (CLI)

`r con` Graphical User Interface (GUI)
]

.pull-right[
.secondary[Useful CL commands]
```bash
cd ~/path/to/dir/
cp ~/file/to/copy.md file/to/paste.md
cp -r ~/dir/to/copy/ dir/to/paste
ls -a # list all files (including hidden)
rm ~/file/to/delete.txt
```
]

--

.your-turn[
How do you delete a directory then?
]

--

.emphasis[
rm -r ~/dir/to/delete 
]

The `-r` flag means to be done recursively. Many linux commands have this flag, in the case of `rm`, it remove directories and their contents recursively.

---

# Linux and CLI

Note, there are cases that you want to delete directories where files are protected (like those of **git**)

Use the following with **CAUTION**:

--

.alert[
.large[`rm -rf ~/dir/to/delete/gone_is_gone`]
]

--

The `-f` flag tells to delete .hand[force] without confirmation. Be very careful on what are you deleting. 

You likely don't want to contact admin:
> You: Hey, I think I have deleted my $HOME directory
>
> Admin: .......
>

---

# Linux and CLI

Most Linux commands have a built-in manual (man page) that serves as a quick guide to tell you what a command does. You could almost always type `command --help`.

Let's see an example
--

.pull-left[
```bash
ls --help
```

Seems scary right? I agree! `r pro`

But it gets better later, and let's dig more into its details. Look at the following:
.emphasis[
Usage: ls [OPTION] ... [FILE] ...
]

This part is where it tells you how you should use a command, what **possible** options it accepts

The [...] are .secondary[optional argument/s] and could be specified with the **flag** it takes. For example: `ls -a` or `ls --all` list **ALL** files of a directory.

]
.pull-right[
![](materials/img/help_usage.jpg)
]

---

.your-turn[

Try on any commands of your interest and look at its doc with `--help`

]

--
You could combine flags as well

```bash
ls -alh
```
Single letter flags **can** be combined together, BUT whole words .secondary[cannot] 

```bash
ls --all --human-readable -l
```
--

`r pro` Order of argument doesnn't matter
`r pro` Short options can be combined together
`r pro` Try --help on a command that you don't know how to use
`r con` Long options cannot be combined together
`r con` Use -f flag wisely

--

.secondary[.larger[.center[Questions?]]]

---

# How to connect

Login to sockeye with:
```bash
# replace cwl with your actual cwl
ssh cwl@sockeye.arc.ubc.ca
```
- Upond login, you're on a `login` node
- You can run **short** interactive jobs there
- We will have an alias to do this later

<hr>

But requires some configuration on your laptop/PC

--

.emphasis[

You need to have an IP address from UBC, either by connected to UBC Wifi or VPN

]


---

# Basic Information of Sockeye

**Sockeye** is a High Performance Computing (HPC) platform, use it to run .secondary[large] computational analysis or works here.

--

- It uses .secondary[PBS Pro], Compute Canada uses .secondary[Slurm]

- Although requires knowledge to **Linux and CLI**

- You have different **nodes** on Sockeye

--

.pull-left[

.secondary[Login Nodes]

- Where you land on after `ssh`
- Has internet access
- You spend **MOST** time here
]

.pull-right[

.secondary[Compute Nodes]

- "You don't do much on here"
- Do not have internet access
- There's an interactive type of this

]

--

.emphasis[
  You could `echo $HOSTNAME` to verify if you are in a login node
]

---

# Bashrc

---

# Job Submission

---

# VSC Setup

---

class: middle, center
background-image: url(materials/img/website_bkg.png)
background-position: top
background-size: contain

<br><br>
.secondary[.center[.larger[Thanks!]]]

Slides created via the R package [**xaringan**](https://github.com/yihui/xaringan).

Credits to:

  [Stat 406 Lecture Slides @DJM](https://ubc-stat.github.io/stat-406/)

<br><br>

.secondary[.center[.larger[Questions?]]]
